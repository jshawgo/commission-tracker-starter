{"ast":null,"code":"import React,{useState,useEffect}from'react';import PartNumberInput from'./PartNumberInput';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const JobForm=()=>{const[wholesale,setWholesale]=useState('');const[retail,setRetail]=useState('');const[labor,setLabor]=useState('');const[shipping,setShipping]=useState('0');const[commissionRate,setCommissionRate]=useState(()=>{return parseFloat(localStorage.getItem('commissionRate')||25);});const[commission,setCommission]=useState(null);const[jobLog,setJobLog]=useState(()=>{return JSON.parse(localStorage.getItem('jobLog')||'[]');});useEffect(()=>{localStorage.setItem('jobLog',JSON.stringify(jobLog));},[jobLog]);const handleRateChange=e=>{const value=parseFloat(e.target.value);setCommissionRate(value);localStorage.setItem('commissionRate',value);};const calculateCommission=()=>{const partProfit=parseFloat(retail)-parseFloat(wholesale);const total=partProfit+parseFloat(labor)+parseFloat(shipping);const rate=commissionRate/100;const commissionValue=parseFloat((rate*total).toFixed(2));setCommission(commissionValue);const newJob={date:new Date().toISOString(),wholesale:parseFloat(wholesale),retail:parseFloat(retail),labor:parseFloat(labor),shipping:parseFloat(shipping),commission:commissionValue};setJobLog([...jobLog,newJob]);};const resetLog=()=>{setJobLog([]);localStorage.removeItem('jobLog');};const exportCSV=()=>{const headers=['Date','Wholesale','Retail','Labor','Shipping','Commission'];const rows=jobLog.map(job=>[job.date,job.wholesale,job.retail,job.labor,job.shipping,job.commission].join(','));const csvContent=[headers.join(','),...rows].join('\\n');const blob=new Blob([csvContent],{type:'text/csv'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='commission_log.csv';a.click();URL.revokeObjectURL(url);};const totalCommission=jobLog.reduce((sum,job)=>sum+job.commission,0).toFixed(2);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Commission Calculator\"}),/*#__PURE__*/_jsx(PartNumberInput,{onPriceFetched:price=>setWholesale(price)}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'10px'},children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Wholesale Price: $\",wholesale]})}),/*#__PURE__*/_jsx(\"label\",{children:\"Commission Rate (%):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:commissionRate,onChange:handleRateChange,step:\"0.1\",min:\"0\",max:\"100\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Retail Price:\"}),/*#__PURE__*/_jsx(\"input\",{value:retail,onChange:e=>setRetail(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Labor Billed:\"}),/*#__PURE__*/_jsx(\"input\",{value:labor,onChange:e=>setLabor(e.target.value)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Shipping:\"}),/*#__PURE__*/_jsxs(\"select\",{value:shipping,onChange:e=>setShipping(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"None\"}),/*#__PURE__*/_jsx(\"option\",{value:\"14.99\",children:\"Standard ($14.99)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"80\",children:\"Oversized ($80.00)\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:calculateCommission,children:\"Calculate\"}),/*#__PURE__*/_jsx(\"button\",{onClick:resetLog,style:{marginLeft:'10px'},children:\"Reset All Logs\"}),/*#__PURE__*/_jsx(\"button\",{onClick:exportCSV,style:{marginLeft:'10px'},children:\"Export CSV\"}),commission!==null&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Last Commission: $\",commission]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total Logged Commission:\"}),\" $\",totalCommission]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Job Log\"}),/*#__PURE__*/_jsx(\"ul\",{children:jobLog.map((job,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[new Date(job.date).toLocaleString(),\": $\",job.commission,\" from $\",job.retail,\" retail / $\",job.wholesale,\" wholesale / $\",job.labor,\" labor / $\",job.shipping,\" shipping\"]},index))})]});};export default JobForm;","map":{"version":3,"names":["React","useState","useEffect","PartNumberInput","jsx","_jsx","jsxs","_jsxs","JobForm","wholesale","setWholesale","retail","setRetail","labor","setLabor","shipping","setShipping","commissionRate","setCommissionRate","parseFloat","localStorage","getItem","commission","setCommission","jobLog","setJobLog","JSON","parse","setItem","stringify","handleRateChange","e","value","target","calculateCommission","partProfit","total","rate","commissionValue","toFixed","newJob","date","Date","toISOString","resetLog","removeItem","exportCSV","headers","rows","map","job","join","csvContent","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","totalCommission","reduce","sum","children","onPriceFetched","price","style","marginTop","onChange","step","min","max","onClick","marginLeft","index","toLocaleString"],"sources":["C:/Users/james/Downloads/commission-tracker-with-redirects/src/components/JobForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport PartNumberInput from './PartNumberInput';\n\nconst JobForm = () => {\n  const [wholesale, setWholesale] = useState('');\n  const [retail, setRetail] = useState('');\n  const [labor, setLabor] = useState('');\n  const [shipping, setShipping] = useState('0');\n  const [commissionRate, setCommissionRate] = useState(() => {\n    return parseFloat(localStorage.getItem('commissionRate') || 25);\n  });\n  const [commission, setCommission] = useState(null);\n  const [jobLog, setJobLog] = useState(() => {\n    return JSON.parse(localStorage.getItem('jobLog') || '[]');\n  });\n\n  useEffect(() => {\n    localStorage.setItem('jobLog', JSON.stringify(jobLog));\n  }, [jobLog]);\n\n  const handleRateChange = (e) => {\n    const value = parseFloat(e.target.value);\n    setCommissionRate(value);\n    localStorage.setItem('commissionRate', value);\n  };\n\n  const calculateCommission = () => {\n    const partProfit = parseFloat(retail) - parseFloat(wholesale);\n    const total = partProfit + parseFloat(labor) + parseFloat(shipping);\n    const rate = commissionRate / 100;\n    const commissionValue = parseFloat((rate * total).toFixed(2));\n    setCommission(commissionValue);\n\n    const newJob = {\n      date: new Date().toISOString(),\n      wholesale: parseFloat(wholesale),\n      retail: parseFloat(retail),\n      labor: parseFloat(labor),\n      shipping: parseFloat(shipping),\n      commission: commissionValue\n    };\n    setJobLog([...jobLog, newJob]);\n  };\n\n  const resetLog = () => {\n    setJobLog([]);\n    localStorage.removeItem('jobLog');\n  };\n\n  const exportCSV = () => {\n    const headers = ['Date', 'Wholesale', 'Retail', 'Labor', 'Shipping', 'Commission'];\n    const rows = jobLog.map(job =>\n      [job.date, job.wholesale, job.retail, job.labor, job.shipping, job.commission].join(',')\n    );\n    const csvContent = [headers.join(','), ...rows].join('\\n');\n    const blob = new Blob([csvContent], { type: 'text/csv' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'commission_log.csv';\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const totalCommission = jobLog.reduce((sum, job) => sum + job.commission, 0).toFixed(2);\n\n  return (\n    <div>\n      <h2>Commission Calculator</h2>\n      <PartNumberInput onPriceFetched={(price) => setWholesale(price)} />\n\n      <div style={{ marginTop: '10px' }}>\n        <label>Wholesale Price: ${wholesale}</label>\n      </div>\n\n      <label>Commission Rate (%):</label>\n      <input\n        type=\"number\"\n        value={commissionRate}\n        onChange={handleRateChange}\n        step=\"0.1\"\n        min=\"0\"\n        max=\"100\"\n      /><br />\n\n      <label>Retail Price:</label>\n      <input value={retail} onChange={(e) => setRetail(e.target.value)} /><br />\n\n      <label>Labor Billed:</label>\n      <input value={labor} onChange={(e) => setLabor(e.target.value)} /><br />\n\n      <label>Shipping:</label>\n      <select value={shipping} onChange={(e) => setShipping(e.target.value)}>\n        <option value=\"0\">None</option>\n        <option value=\"14.99\">Standard ($14.99)</option>\n        <option value=\"80\">Oversized ($80.00)</option>\n      </select><br /><br />\n\n      <button onClick={calculateCommission}>Calculate</button>\n      <button onClick={resetLog} style={{ marginLeft: '10px' }}>Reset All Logs</button>\n      <button onClick={exportCSV} style={{ marginLeft: '10px' }}>Export CSV</button>\n\n      {commission !== null && <p>Last Commission: ${commission}</p>}\n      <p><strong>Total Logged Commission:</strong> ${totalCommission}</p>\n\n      <h3>Job Log</h3>\n      <ul>\n        {jobLog.map((job, index) => (\n          <li key={index}>\n            {new Date(job.date).toLocaleString()}: ${job.commission} from ${job.retail} retail / ${job.wholesale} wholesale / ${job.labor} labor / ${job.shipping} shipping\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default JobForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}